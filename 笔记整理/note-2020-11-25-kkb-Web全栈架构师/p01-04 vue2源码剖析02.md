# p01-05 vue2源码剖析02

<!-- Janus webrtc server -->

- 宏任务
    - setTimeout setInterval
    - ajax
- 微任务
    - promise

https://jakearchibald.com/2015/tasks-microtasks-queues-and-schedules/?utm_source=html5weekly

watcher -> flushSchedulerQueue(微任务)


vue 首选微任务 (promise)

- **watch 批量执行实现**
- src\core\observer\scheduler.js
- src\core\observer\watcher.js
- src\core\util\next-tick.js

flushCallbacks
flushSchedulerQueue

nextTich的队列和watcher队列的执行

nextTich执行时机:
nextTich 在改值前注册会先执行， 以为这时队列是空的
nextTich 在改值后注册会在watcher执行后执行(正常的理解)

queueWatcher


- *虚拟dom*  
js对象

\src\core\instance\lifecycle.js  lifecycleMixin
\src\platforms\web\runtime\index.js \_\_patch\_\_


文件 方法 数据 效果
