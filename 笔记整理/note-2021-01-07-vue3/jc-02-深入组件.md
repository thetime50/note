
# 深入组件
## 组件注册

使用 app.component('my-component-name', {config}) 注册

如果组件是用kebab-case (短横线分隔命名) 定义，使用时必须是 kebab-case
组件是用PascalCase (首字母大写命名) 定义， 使用时可以是kebab-case 和 PascalCase


```js
/* 全局注册 */
const app = Vue.createApp({})
// 这个是用vue实例component方法 全局注册组件
app.component('component-a', {
  /* ... */
})

/* 局部注册 */
// 这个是在根组件上注册子组件 传递根组件的配置选项 
// 只有在 app 根组件上有效
const app = Vue.createApp({
  components: {
    'component-a': ComponentA,
    'component-b': ComponentB
  }
})

/* 或者其他组件的components 选项 */
import ComponentA from './ComponentA.vue'

export default {
  components: {
    ComponentA
  }
  // ...
}
```

## props

### props 定义
```js
export default{
/* 1. 数组 */
props: ['title', 'likes', 'isPublished', 'commentIds', 'author']

/* 2. 对象-类型 */
props: {
  title: String,
  likes: Number,
  isPublished: Boolean,
  commentIds: Array,
  author: Object,
  callback: Function,
  contactsPromise: Promise // 或任何其他构造函数
}
}
```

### 引用
```html
<blog-post v-bind:id="post.id" v-bind:title="post.title"></blog-post>
<blog-post v-bind="{
  id: 1,
  title: 'My Journey with Vue'
}"></blog-post>

```

### 导向数据流
不应该在一个子组件内部改变 prop。Vue 会在浏览器的控制台中发出警告。

场景
```js
/* 1. 在data中用this.myProp 初始化数据 */
{
    props: ['initialCounter'],
    data() {
        return {
            counter: this.initialCounter
        }
    }
}

/* 2. computed 里面引用prop 进行加工计算 */
{
    props: ['size'],
    computed: {
        normalizedSize: function () {
            return this.size.trim().toLowerCase()
        }
    }
}
```

### Prop 验证

1. {type,default,required}
2. { validator:function(){ return true } } // 返回true表示数据有效

```js
app.component('my-component', {
  props: {
    // 基础的类型检查 (`null` 和 `undefined` 会通过任何类型验证)
    propA: Number,
    // 多个可能的类型
    propB: [String, Number],
    // 必填的字符串
    propC: {
      type: String,
      required: true
    },
    // 带有默认值的数字
    propD: {
      type: Number,
      default: 100
    },
    // 带有默认值的对象
    propE: {
      type: Object,
      // 对象或数组默认值必须从一个工厂函数获取
      default: function() {
        return { message: 'hello' }
      }
    },
    // 自定义验证函数
    propF: {
      validator: function(value) {
        // 这个值必须匹配下列字符串中的一个
        return ['success', 'warning', 'danger'].indexOf(value) !== -1
      }
    },
    // 具有默认值的函数
    propG: {
      type: Function,
      // 与对象或数组默认值不同，这不是一个工厂函数 —— 这是一个用作默认值的函数
      default: function() {
        return 'Default function'
      }
    }
  }
})


```
### Prop 的大小写命名 (camelCase vs kebab-case)

使用 DOM 中的模板时，camelCase (驼峰命名法) 的 prop 名需要使用其等价的 kebab-case (短横线分隔命名) 命名  
如果你使用字符串模板，那么这个限制就不存在。




## 非 Prop 的 Attribute