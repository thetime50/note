# 硅谷最新版webpack教程（从入门到精通）

教程：https://www.bilibili.com/video/BV1u7411c7GX?from=search&seid=11615309212575099774  
demo: https://github.com/thetime50/webpack-practice

## 01-课程介绍

环境：  
环境参数 Node 10+  
webpack 4.26+

基础：  
node npm  
ES6语法  

## 02-简介

前端资源工具，静态模块打包器

less sass 预编译  
ES6 语法处理

- 入口
- 依赖关系 -> chunk(块) --打包-> bundle

## 03-5个核心概念

1. Entry  
    打包入口
2. Output  
    输出目录
3. Loader
    载入资源的处理方式
4. Plugins
    功能更强大 范围更广的任务
5. Mode
    模式 development/production

## 04-webpack体验

```cmd
npm init  
npm i webpack webpack-cli -g
npm i webpack webpack-cli -D ::开发依赖 webpack 只在开发环境中使用
```

webpack 入口文件  
### 运行指令
- 开发环境指令
    - webpack ./src/index.js -o ./build/built.js --mode=development  
    - 打包信息：  
        Hash: 哈希  
        Version: webpack版本  
        Time: 时间  
        Build at: 详细信息  
        表格: Asset输出资源 chunks所属chunk(chunks name)  
    - // todo 为什么我built.js是作为目录了  
    - 生成到目标文件eval()中
- 生产环境指令
    - webpack ./src/index.js -o ./build/built.js --mode=production  
    - 多了压缩效果,(视频里面只是压缩，在我测试demo里面代码被优化了，就剩个console.log(9)

- 能够处理js json  
    - development json文件被处理到不同模块里去了
    - production 解析为字符串用 JSON.stringify处理
- 把ES6 module 编译为浏览器能识别的module
- 不能处理 css 图片


```
package.json:
    "scripts": {
        "webpack": "webpack"
    },

npm run webpack -- ./src/index.js -o ./build/built.js --mode=development
npm run webpack -- ./src/index.js -o ./build/built.js --mode=production
```

## 05-打包样式资源
使用配置文件 webpack.config.js 定义loader

所有构建工具都是基于nodejs平台运行，模块化默认采用 commonjs

```
src项目代码使用的是 ES6 模块
配置文件 webpack.config.js 使用的是 commonjs 模块 (module.export ={})
```

```js
const { resolve } = require('path')

console.log('**', __dirname)

module.exports = {
    entry: resolve(__dirname, './src/index.js'),// './src/index.js',
    output: {
        filename: 'built.js',
        path: resolve(__dirname, 'build')
    },
    // loader 配置
    module: {
        rules: [
            {
                test: /\.css$/,//匹配文件
                // node 加载依赖包会自动往上级目录找 好像没法使用npm run webpack
                use: [// 处理方式 从后往前执行
                    'style-loader',// 创建syle标签，将js中的样式资源插入到header中
                    'css-loader',// 将css文件变为commonjs模块加载到js中
                ],
            }
        ],
    },
    // plugins
    plugins: [
        // 
    ],
    mode: 'development',
    // mode: 'production',
}
```

```cmd
webpack
// npm run webpack
```

