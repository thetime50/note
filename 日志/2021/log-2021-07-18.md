# 2021-07-18

存储和coockie

## 当浏览器全面禁用三方 Cookie
[当浏览器全面禁用三方 Cookie (2020/04)](https://juejin.cn/post/6844904128557105166#heading-5)
[demo->]()

苹果Safari 等公司 禁用第三方Cookie

### Cookie 的意义
一个存储在客户端的记录信息

### 第三方 Coockie

非当前域下的 Cookie 都属于第三方 Cookie

用途，淘宝、天猫都属于阿里旗下的产品，阿里为他们提供统一的登录服务，同时，你的登录信息也会存到这个统一登录服务的域下，所以存到这个域下的 Cookie 就成了三方 Cookie。

[淘宝天猫登录多域名登录](#淘宝天猫登录)

### 三方Cookie的用途

#### 日志打点

引用第三方SDK异常监控或者性能监控，
1. 请求第三方脚本
2. set 第三方cookie
3. 每次向第三方请求数据都会带上cookie

#### 广告营销神器 - Facebook Pixel

用户页面访问跳转和操作事件统计 用coockie关联账号  
购买 注册 付款 加购物车 颜色挑选 发起付款但是没付 等等

#### 无处不在的的 mmstat




## 浏览器WebStorage缓存使用指南
[浏览器WebStorage缓存使用指南](https://juejin.cn/post/6984908770149138446)




## 参考
### 淘宝天猫登录
[啥是单点登陆？淘宝和天猫是如何实现同时登陆的？](https://blog.csdn.net/u011277123/article/details/90714949)


1. 客户端向 a.com 验证登录 
2. a.com 检查到未登录 重定向到 soo服务进行登录
3.1 用户登录soo,soo生成token保存到浏览器  
3.2 重定向soo的访问到 a.com并带上token (这里的重定向是什么意思)
4. a.com 验证客户端的token和soo得到的token

[网页天猫是如何做到使用淘宝域名登录登出？](https://www.zhihu.com/question/36895074)  

1. 通过iframe通信
2. jsp 传递token,判断header中的referer是不是tmall来避免xss攻击获取soo token

所有的login操作包括session管理都搞到一台机子或者一个专门的集群上去。这种方式叫单点登录俗称sso

### UV和PV
[如何清楚易懂的解释“UV和PV＂的定义？](https://www.zhihu.com/question/20448467)


